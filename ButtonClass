import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.RoundRectangle2D;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComponent;

public class ButtonClass extends JButton
{	
	private static final Font smallFont = new Font("Verdana", Font.BOLD, 20);
	private static final Color numbersBgColor = new Color(0.18824f, 0.196f, 0.2039f);
	private static final Color specialBgColor = new Color(0.68627f, 0.56078f, 0.91373f);
	private static final Color borderColor = new Color(0.031f, 0.00784f, 0.14118f, 1.f);
	
	/* TODO
	 * Set different background colors depending on the button
	 * 
	*/
	private float opacity;
	
	
	public void setOpacity(float opacity) 
	{
	    this.opacity = opacity;
	    
		this.setBackground(new Color((float)this.getBackground().getRed() / 255, 
				(float)this.getBackground().getBlue() / 255, 
				(float)this.getBackground().getGreen() / 255, opacity));
	    MainClass.buttonPanel.repaint();
	}

	public float getOpacity(){
	    return this.opacity;
	}
	
	
	/*
	@Override
	public void paint(Graphics g) 
	{   
		//Color newBG = new Color(0.18824f, 0.196f, 0.2039f, opacity);
	    
	    //this.setBackground(newBG);
	    //this.setForeground(Color.WHITE);
	    
	    
	    Graphics2D g2 = (Graphics2D) g.create();
	    g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, opacity));
	    super.paint(g2);
	    //super.setForeground(Color.WHITE);
	    g2.dispose();
	    
	}
	*/
	
	
	ButtonClass(String text)
	{
		this.setText(text);
		this.setFont(ButtonClass.smallFont);
		this.setForeground(Color.WHITE);
		try
		{
			Integer.parseInt(text);
			this.setBackground(ButtonClass.numbersBgColor);
		}
		catch(Exception e)
		{
			this.setBackground(ButtonClass.specialBgColor);
		}
		this.setOpacity(0.6f);
		this.setBorder(BorderFactory.createLineBorder(ButtonClass.borderColor));
		this.addActionListener(e -> 
		{
			MainClass.update(text);
		});
		
		// The mouse hover effect
		this.addMouseListener(new MouseAdapter() 
		{
		    public void mouseEntered(MouseEvent evt) 
		    {
		    	setBorder(BorderFactory.createLineBorder(new Color(1.f, 1.f, 1.f, .2f)));
		    	setOpacity(0.7f);
		    	
		    }

		    public void mouseExited(MouseEvent evt) 
		    {
		    	setBorder(BorderFactory.createLineBorder(ButtonClass.borderColor));
		    	setOpacity(0.6f);
		    }
		});
	}
	
	public JComponent getButton()
	{
		return this;
	}
}
